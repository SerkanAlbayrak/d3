<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="tr" xml:lang="tr"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Raif Serkan Albayrak">
<meta name="description" content="R’ın en esnek veri yapısı olan list veri yapısından tutulan veriye ulaşma, formatlama ve dönüştürme üzerine en sık kullandığım yöntemleri yazıyorum.">

<title>zeytin - List veri yapısı üzerine üzerine notlar ve map Fonksiyonu</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../images/olive_fav.png" rel="icon" type="image/png">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "Sonuç yok",
    "search-matching-documents-text": "eşleşen belgeler",
    "search-copy-link-title": "Aramak için bağlantıyı kopyalayın",
    "search-hide-matches-text": "Ek eşleşmeleri gizle",
    "search-more-match-text": "bu belgede daha fazla eşleşme",
    "search-more-matches-text": "bu belgede daha fazla eşleşmeler",
    "search-clear-button-title": "Temizle",
    "search-detached-cancel-button-title": "İptal et",
    "search-submit-button-title": "Göndermek",
    "search-label": "Aramak"
  }
}</script>

<script src="../../../site_libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="../../../site_libs/reactjson-binding-3.0.0/reactjson.js"></script>
<script src="../../../site_libs/core-js-2.5.1/shim.min.js"></script>
<script src="../../../site_libs/react-17.0.0/react.min.js"></script>
<script src="../../../site_libs/react-17.0.0/react-dom.min.js"></script>
<script src="../../../site_libs/react-json-view-1.19.1/main.js"></script>
<link href="../../../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="../../../site_libs/datatables-binding-0.28/datatables.js"></script>
<script src="../../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../../../site_libs/dt-core-1.13.4/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="../../../site_libs/dt-core-1.13.4/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="../../../site_libs/dt-core-1.13.4/js/jquery.dataTables.min.js"></script>
<link href="../../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="../../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">zeytin</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Aramak"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Gezinmeyi değiştir" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html" rel="" target="">
 <span class="menu-text">Ana Sayfa</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html" rel="" target="">
 <span class="menu-text">İletişim</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">İçerik</h2>
   
  <ul>
  <li><a href="#tibble-veya-dataframeden-list-oluşturmak" id="toc-tibble-veya-dataframeden-list-oluşturmak" class="nav-link active" data-scroll-target="#tibble-veya-dataframeden-list-oluşturmak">Tibble veya DataFrame’den List Oluşturmak</a>
  <ul class="collapse">
  <li><a href="#split" id="toc-split" class="nav-link" data-scroll-target="#split">Split</a></li>
  <li><a href="#nest" id="toc-nest" class="nav-link" data-scroll-target="#nest">Nest</a></li>
  </ul></li>
  <li><a href="#enframe" id="toc-enframe" class="nav-link" data-scroll-target="#enframe">Enframe</a></li>
  <li><a href="#rectangling" id="toc-rectangling" class="nav-link" data-scroll-target="#rectangling">Rectangling</a>
  <ul class="collapse">
  <li><a href="#purrrlist_." id="toc-purrrlist_." class="nav-link" data-scroll-target="#purrrlist_.">purrr::list_.</a></li>
  <li><a href="#tidyr" id="toc-tidyr" class="nav-link" data-scroll-target="#tidyr">tidyr</a></li>
  </ul></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content column-page-right" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">List veri yapısı üzerine üzerine notlar ve map Fonksiyonu</h1>
  <div class="quarto-categories">
    <div class="quarto-category">purrr</div>
    <div class="quarto-category">map</div>
  </div>
  </div>

<div>
  <div class="description">
    R’ın en esnek veri yapısı olan list veri yapısından tutulan veriye ulaşma, formatlama ve dönüştürme üzerine en sık kullandığım yöntemleri yazıyorum.
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Yazar</div>
    <div class="quarto-title-meta-contents">
             <p>Raif Serkan Albayrak </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Yayınlanma Tarihi</div>
    <div class="quarto-title-meta-contents">
      <p class="date">11 Aralık 2022</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.2     ✔ readr     2.1.4
✔ forcats   1.0.0     ✔ stringr   1.5.0
✔ ggplot2   3.4.2     ✔ tibble    3.2.1
✔ lubridate 1.9.2     ✔ tidyr     1.3.0
✔ purrr     1.0.1     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(listviewer)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(repurrrsive)</span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Liste veri yapısı her ne kadar R’ın bildiğim kadarıyla en esnek veri yapısı olsa da, filtrelenmesi, endekslenmesi ve hata veri girişi konusu karışık ve az biliniyor. Özellikler JSON tipi veri liste dönüştüğünde katmanlı ve düzensiz bir yapıya sahip olabiliyor. Bu gibi durumlarda istenen herhangi bir katmandaki tüm veriyi çekmek veya ihtiyaç duyulan filtrelemeleri yapmak kolay değil. Bunlardan sonra daha detaylı analizler için zaten list’i tibble veya dataframe’e dönüştürmek gerekiyor. O kısım da bu yazının konusu.</p>
<p>Yazıya ters yönlü transformasyonla başlamak en iyi seçenek gibi görünmeyebilir ama aslında yazı boyunca kullanılabilecek örnek list verisi oluşturabilmek için de tibble’dan list’e dönüşüm ile başlıyorum.</p>
<section id="tibble-veya-dataframeden-list-oluşturmak" class="level1">
<h1>Tibble veya DataFrame’den List Oluşturmak</h1>
<p>Tibble’dan list’e dönüşüm bir veya daha fazla kategorik değişken üzerinden yürütülür. Örneğin <code>mtcars</code> verisinde silindir değişkeni ile veriyi üçe parçalamak mümkün. Sonuçta bir list elde edilir.</p>
<section id="split" class="level2">
<h2 class="anchored" data-anchor-id="split">Split</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>mtList <span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">split</span>(.<span class="sc">$</span>cyl)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Daha anlaşılır formatta aynı komut şöyle de yazılabilirdi:</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>mtList <span class="ot">&lt;-</span> <span class="fu">split</span>(mtcars, <span class="at">f =</span> mtcars<span class="sc">$</span>cyl)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">reactjson</span>(mtList, <span class="at">collapsed =</span> <span class="dv">1</span>, <span class="at">height =</span> <span class="dv">200</span>) </span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required namespace: reactR</code></pre>
</div>
<div class="cell-output-display">
<div id="htmlwidget-ff301dfcae45231b2296" style="width:100%;height:193px;" class="reactjson html-widget "></div>
<script type="application/json" data-for="htmlwidget-ff301dfcae45231b2296">{"x":{"data":{"4":{"mpg":[22.8,24.4,22.8,32.4,30.4,33.9,21.5,27.3,26,30.4,21.4],"cyl":[4,4,4,4,4,4,4,4,4,4,4],"disp":[108,146.7,140.8,78.7,75.7,71.09999999999999,120.1,79,120.3,95.09999999999999,121],"hp":[93,62,95,66,52,65,97,66,91,113,109],"drat":[3.85,3.69,3.92,4.08,4.93,4.22,3.7,4.08,4.43,3.77,4.11],"wt":[2.32,3.19,3.15,2.2,1.615,1.835,2.465,1.935,2.14,1.513,2.78],"qsec":[18.61,20,22.9,19.47,18.52,19.9,20.01,18.9,16.7,16.9,18.6],"vs":[1,1,1,1,1,1,1,1,0,1,1],"am":[1,0,0,1,1,1,0,1,1,1,1],"gear":[4,4,4,4,4,4,3,4,5,5,4],"carb":[1,2,2,1,2,1,1,1,2,2,2]},"6":{"mpg":[21,21,21.4,18.1,19.2,17.8,19.7],"cyl":[6,6,6,6,6,6,6],"disp":[160,160,258,225,167.6,167.6,145],"hp":[110,110,110,105,123,123,175],"drat":[3.9,3.9,3.08,2.76,3.92,3.92,3.62],"wt":[2.62,2.875,3.215,3.46,3.44,3.44,2.77],"qsec":[16.46,17.02,19.44,20.22,18.3,18.9,15.5],"vs":[0,0,1,1,1,1,0],"am":[1,1,0,0,0,0,1],"gear":[4,4,3,3,4,4,5],"carb":[4,4,1,1,4,4,6]},"8":{"mpg":[18.7,14.3,16.4,17.3,15.2,10.4,10.4,14.7,15.5,15.2,13.3,19.2,15.8,15],"cyl":[8,8,8,8,8,8,8,8,8,8,8,8,8,8],"disp":[360,360,275.8,275.8,275.8,472,460,440,318,304,350,400,351,301],"hp":[175,245,180,180,180,205,215,230,150,150,245,175,264,335],"drat":[3.15,3.21,3.07,3.07,3.07,2.93,3,3.23,2.76,3.15,3.73,3.08,4.22,3.54],"wt":[3.44,3.57,4.07,3.73,3.78,5.25,5.424,5.345,3.52,3.435,3.84,3.845,3.17,3.57],"qsec":[17.02,15.84,17.4,17.6,18,17.98,17.82,17.42,16.87,17.3,15.41,17.05,14.5,14.6],"vs":[0,0,0,0,0,0,0,0,0,0,0,0,0,0],"am":[0,0,0,0,0,0,0,0,0,0,0,0,1,1],"gear":[3,3,3,3,3,3,3,3,3,3,3,3,5,5],"carb":[2,4,3,3,3,4,4,4,2,2,4,2,4,8]}},"name":"root","theme":"rjv-default","iconStyle":"circle","indentWidth":4,"collapsed":1,"collapseStringsAfterLength":false,"groupArraysAfterLength":100,"enableClipboard":true,"displayObjectSize":true,"displayDataTypes":true,"onEdit":true,"onAdd":true,"onDelete":true,"onSelect":true,"sortKeys":false},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><br></p>
<p>Bir diğer örnek <code>CO2</code> verisi üzerinde olacak. Önce veriyi tanıtıyorum.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>CO2 <span class="ot">&lt;-</span> CO2</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(CO2)</span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-1461f1b0448071c6d2df" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-1461f1b0448071c6d2df">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84"],["Qn1","Qn1","Qn1","Qn1","Qn1","Qn1","Qn1","Qn2","Qn2","Qn2","Qn2","Qn2","Qn2","Qn2","Qn3","Qn3","Qn3","Qn3","Qn3","Qn3","Qn3","Qc1","Qc1","Qc1","Qc1","Qc1","Qc1","Qc1","Qc2","Qc2","Qc2","Qc2","Qc2","Qc2","Qc2","Qc3","Qc3","Qc3","Qc3","Qc3","Qc3","Qc3","Mn1","Mn1","Mn1","Mn1","Mn1","Mn1","Mn1","Mn2","Mn2","Mn2","Mn2","Mn2","Mn2","Mn2","Mn3","Mn3","Mn3","Mn3","Mn3","Mn3","Mn3","Mc1","Mc1","Mc1","Mc1","Mc1","Mc1","Mc1","Mc2","Mc2","Mc2","Mc2","Mc2","Mc2","Mc2","Mc3","Mc3","Mc3","Mc3","Mc3","Mc3","Mc3"],["Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi"],["nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled"],[95,175,250,350,500,675,1000,95,175,250,350,500,675,1000,95,175,250,350,500,675,1000,95,175,250,350,500,675,1000,95,175,250,350,500,675,1000,95,175,250,350,500,675,1000,95,175,250,350,500,675,1000,95,175,250,350,500,675,1000,95,175,250,350,500,675,1000,95,175,250,350,500,675,1000,95,175,250,350,500,675,1000,95,175,250,350,500,675,1000],[16,30.4,34.8,37.2,35.3,39.2,39.7,13.6,27.3,37.1,41.8,40.6,41.4,44.3,16.2,32.4,40.3,42.1,42.9,43.9,45.5,14.2,24.1,30.3,34.6,32.5,35.4,38.7,9.300000000000001,27.3,35,38.8,38.6,37.5,42.4,15.1,21,38.1,34,38.9,39.6,41.4,10.6,19.2,26.2,30,30.9,32.4,35.5,12,22,30.6,31.8,32.4,31.1,31.5,11.3,19.4,25.8,27.9,28.5,28.1,27.8,10.5,14.9,18.1,18.9,19.5,22.2,21.9,7.7,11.4,12.3,13,12.5,13.7,14.4,10.6,18,17.9,17.9,17.9,18.9,19.9]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Plant<\/th>\n      <th>Type<\/th>\n      <th>Treatment<\/th>\n      <th>conc<\/th>\n      <th>uptake<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[4,5]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Aynı verinin reactjson ile gösterimi aşağıda verildi. Aslında reactjson list görselleştirmesinde kullanılıyor ama her tibble veya dataframe için kolon’un bir list ile eşdeğer olduğunu hatırlamak için buraya koydum. Yukarıda DataTable ile gösterilen ile aşağıda reactjson ile gösterilen birebir aynı veri.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">reactjson</span>(CO2,<span class="at">collapsed =</span> <span class="dv">1</span>,<span class="at">height =</span> <span class="dv">250</span>)</span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="htmlwidget-b05d604be8052e7a2162" style="width:100%;height:241px;" class="reactjson html-widget "></div>
<script type="application/json" data-for="htmlwidget-b05d604be8052e7a2162">{"x":{"data":{"Plant":["Qn1","Qn1","Qn1","Qn1","Qn1","Qn1","Qn1","Qn2","Qn2","Qn2","Qn2","Qn2","Qn2","Qn2","Qn3","Qn3","Qn3","Qn3","Qn3","Qn3","Qn3","Qc1","Qc1","Qc1","Qc1","Qc1","Qc1","Qc1","Qc2","Qc2","Qc2","Qc2","Qc2","Qc2","Qc2","Qc3","Qc3","Qc3","Qc3","Qc3","Qc3","Qc3","Mn1","Mn1","Mn1","Mn1","Mn1","Mn1","Mn1","Mn2","Mn2","Mn2","Mn2","Mn2","Mn2","Mn2","Mn3","Mn3","Mn3","Mn3","Mn3","Mn3","Mn3","Mc1","Mc1","Mc1","Mc1","Mc1","Mc1","Mc1","Mc2","Mc2","Mc2","Mc2","Mc2","Mc2","Mc2","Mc3","Mc3","Mc3","Mc3","Mc3","Mc3","Mc3"],"Type":["Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi"],"Treatment":["nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled"],"conc":[95,175,250,350,500,675,1000,95,175,250,350,500,675,1000,95,175,250,350,500,675,1000,95,175,250,350,500,675,1000,95,175,250,350,500,675,1000,95,175,250,350,500,675,1000,95,175,250,350,500,675,1000,95,175,250,350,500,675,1000,95,175,250,350,500,675,1000,95,175,250,350,500,675,1000,95,175,250,350,500,675,1000,95,175,250,350,500,675,1000],"uptake":[16,30.4,34.8,37.2,35.3,39.2,39.7,13.6,27.3,37.1,41.8,40.6,41.4,44.3,16.2,32.4,40.3,42.1,42.9,43.9,45.5,14.2,24.1,30.3,34.6,32.5,35.4,38.7,9.300000000000001,27.3,35,38.8,38.6,37.5,42.4,15.1,21,38.1,34,38.9,39.6,41.4,10.6,19.2,26.2,30,30.9,32.4,35.5,12,22,30.6,31.8,32.4,31.1,31.5,11.3,19.4,25.8,27.9,28.5,28.1,27.8,10.5,14.9,18.1,18.9,19.5,22.2,21.9,7.7,11.4,12.3,13,12.5,13.7,14.4,10.6,18,17.9,17.9,17.9,18.9,19.9]},"name":"root","theme":"rjv-default","iconStyle":"circle","indentWidth":4,"collapsed":1,"collapseStringsAfterLength":false,"groupArraysAfterLength":100,"enableClipboard":true,"displayObjectSize":true,"displayDataTypes":true,"onEdit":true,"onAdd":true,"onDelete":true,"onSelect":true,"sortKeys":false},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Yukarıda data <code>Type</code> ve <code>Treatment</code> değişkenleri etrafında dağıtıldığında;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>CO2List <span class="ot">&lt;-</span> <span class="fu">split</span>(CO2, <span class="at">f =</span> <span class="fu">list</span>(CO2<span class="sc">$</span>Type, CO2<span class="sc">$</span>Treatment))</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">reactjson</span>(CO2List,<span class="at">collapsed=</span><span class="dv">2</span>)</span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="reactjson html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-7b089685594da59c3a95" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-7b089685594da59c3a95">{"x":{"data":{"Quebec.nonchilled":{"Plant":["Qn1","Qn1","Qn1","Qn1","Qn1","Qn1","Qn1","Qn2","Qn2","Qn2","Qn2","Qn2","Qn2","Qn2","Qn3","Qn3","Qn3","Qn3","Qn3","Qn3","Qn3"],"Type":["Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec"],"Treatment":["nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled"],"conc":[95,175,250,350,500,675,1000,95,175,250,350,500,675,1000,95,175,250,350,500,675,1000],"uptake":[16,30.4,34.8,37.2,35.3,39.2,39.7,13.6,27.3,37.1,41.8,40.6,41.4,44.3,16.2,32.4,40.3,42.1,42.9,43.9,45.5]},"Mississippi.nonchilled":{"Plant":["Mn1","Mn1","Mn1","Mn1","Mn1","Mn1","Mn1","Mn2","Mn2","Mn2","Mn2","Mn2","Mn2","Mn2","Mn3","Mn3","Mn3","Mn3","Mn3","Mn3","Mn3"],"Type":["Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi"],"Treatment":["nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled","nonchilled"],"conc":[95,175,250,350,500,675,1000,95,175,250,350,500,675,1000,95,175,250,350,500,675,1000],"uptake":[10.6,19.2,26.2,30,30.9,32.4,35.5,12,22,30.6,31.8,32.4,31.1,31.5,11.3,19.4,25.8,27.9,28.5,28.1,27.8]},"Quebec.chilled":{"Plant":["Qc1","Qc1","Qc1","Qc1","Qc1","Qc1","Qc1","Qc2","Qc2","Qc2","Qc2","Qc2","Qc2","Qc2","Qc3","Qc3","Qc3","Qc3","Qc3","Qc3","Qc3"],"Type":["Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec","Quebec"],"Treatment":["chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled"],"conc":[95,175,250,350,500,675,1000,95,175,250,350,500,675,1000,95,175,250,350,500,675,1000],"uptake":[14.2,24.1,30.3,34.6,32.5,35.4,38.7,9.300000000000001,27.3,35,38.8,38.6,37.5,42.4,15.1,21,38.1,34,38.9,39.6,41.4]},"Mississippi.chilled":{"Plant":["Mc1","Mc1","Mc1","Mc1","Mc1","Mc1","Mc1","Mc2","Mc2","Mc2","Mc2","Mc2","Mc2","Mc2","Mc3","Mc3","Mc3","Mc3","Mc3","Mc3","Mc3"],"Type":["Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi","Mississippi"],"Treatment":["chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled","chilled"],"conc":[95,175,250,350,500,675,1000,95,175,250,350,500,675,1000,95,175,250,350,500,675,1000],"uptake":[10.5,14.9,18.1,18.9,19.5,22.2,21.9,7.7,11.4,12.3,13,12.5,13.7,14.4,10.6,18,17.9,17.9,17.9,18.9,19.9]}},"name":"root","theme":"rjv-default","iconStyle":"circle","indentWidth":4,"collapsed":2,"collapseStringsAfterLength":false,"groupArraysAfterLength":100,"enableClipboard":true,"displayObjectSize":true,"displayDataTypes":true,"onEdit":true,"onAdd":true,"onDelete":true,"onSelect":true,"sortKeys":false},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Burada split işlemini geri almak da mümkün ama işlevsiz çünkü f argümanı o aşamada elde olması pek mümkün olmayan bir veri. CO2 verisi o aşamada çoğunlukla elde değil zaten.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>dfCO2 <span class="ot">&lt;-</span> <span class="fu">unsplit</span>(CO2List,<span class="at">f =</span> <span class="fu">list</span>(CO2<span class="sc">$</span>Type,CO2<span class="sc">$</span>Treatment))</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dfCO2)</span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Plant   Type  Treatment conc uptake
1   Qn1 Quebec nonchilled   95   16.0
2   Qn1 Quebec nonchilled  175   30.4
3   Qn1 Quebec nonchilled  250   34.8
4   Qn1 Quebec nonchilled  350   37.2
5   Qn1 Quebec nonchilled  500   35.3
6   Qn1 Quebec nonchilled  675   39.2</code></pre>
</div>
</div>
<p>Sonuç itibariyle pek de anlamlı olmadığını düşündüğüm unsplit, list’i rectangular forma sokmak için bir yöntem. Ama fonksiyonun içinde <code>f</code> argümanı olarak ne yazılacak?</p>
<p>Öte yandan <code>split</code> fonksiyonu oldukça faydalı. Ancak bir sonraki bölümde anlatılan <code>nest</code> kesinlikle daha iyi.</p>
</section>
<section id="nest" class="level2">
<h2 class="anchored" data-anchor-id="nest">Nest</h2>
<p>Nest ile de list oluşturmak mümkün. Yukarıdaki örneklere uyguluyorum. Aşağıda da görüleceği üzere silindir etrafında tüm veriyi dağıtıyor. Daha doğru bir ifade ile “nest” kelimesinin anlamından yola çıkarak, aslında silindir değişkeni <em>dışında</em> tüm değişkenleri saklıyor. Sonuçta 3x2 boyutunda bir tibble çıkıyor.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>mt_nest <span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span> <span class="fu">nest</span>(<span class="at">data=</span><span class="sc">!</span>cyl)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>mt_nest</span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
    cyl data              
  &lt;dbl&gt; &lt;list&gt;            
1     6 &lt;tibble [7 × 10]&gt; 
2     4 &lt;tibble [11 × 10]&gt;
3     8 &lt;tibble [14 × 10]&gt;</code></pre>
</div>
</div>
<p>Bu yapıyı dikkatlice incelemekte fayda var çünkü herhangi bir list üzerinde tibble() konutu uygulandığında doğrudan bu yapıyla karşılaşıyorum. Yani en dışta etiketler sonra aynı dataframe yapısı (değişkenler) tekrar ediyor.</p>
<p>İşin aslı veri genellikle aşağıda yapay bir şekilde oluşturduğum formda geliyor, yani list yapısında.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>mt_nest_List <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">'4'</span> <span class="ot">=</span> mt_nest<span class="sc">$</span>data[[<span class="dv">1</span>]],<span class="st">'6'</span> <span class="ot">=</span> mt_nest<span class="sc">$</span>data[[<span class="dv">2</span>]],<span class="st">'8'</span> <span class="ot">=</span> mt_nest<span class="sc">$</span>data[[<span class="dv">3</span>]])</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>mt_nest_List</span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$`4`
# A tibble: 7 × 10
    mpg  disp    hp  drat    wt  qsec    vs    am  gear  carb
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1  21    160    110  3.9   2.62  16.5     0     1     4     4
2  21    160    110  3.9   2.88  17.0     0     1     4     4
3  21.4  258    110  3.08  3.22  19.4     1     0     3     1
4  18.1  225    105  2.76  3.46  20.2     1     0     3     1
5  19.2  168.   123  3.92  3.44  18.3     1     0     4     4
6  17.8  168.   123  3.92  3.44  18.9     1     0     4     4
7  19.7  145    175  3.62  2.77  15.5     0     1     5     6

$`6`
# A tibble: 11 × 10
     mpg  disp    hp  drat    wt  qsec    vs    am  gear  carb
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1  22.8 108      93  3.85  2.32  18.6     1     1     4     1
 2  24.4 147.     62  3.69  3.19  20       1     0     4     2
 3  22.8 141.     95  3.92  3.15  22.9     1     0     4     2
 4  32.4  78.7    66  4.08  2.2   19.5     1     1     4     1
 5  30.4  75.7    52  4.93  1.62  18.5     1     1     4     2
 6  33.9  71.1    65  4.22  1.84  19.9     1     1     4     1
 7  21.5 120.     97  3.7   2.46  20.0     1     0     3     1
 8  27.3  79      66  4.08  1.94  18.9     1     1     4     1
 9  26   120.     91  4.43  2.14  16.7     0     1     5     2
10  30.4  95.1   113  3.77  1.51  16.9     1     1     5     2
11  21.4 121     109  4.11  2.78  18.6     1     1     4     2

$`8`
# A tibble: 14 × 10
     mpg  disp    hp  drat    wt  qsec    vs    am  gear  carb
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1  18.7  360    175  3.15  3.44  17.0     0     0     3     2
 2  14.3  360    245  3.21  3.57  15.8     0     0     3     4
 3  16.4  276.   180  3.07  4.07  17.4     0     0     3     3
 4  17.3  276.   180  3.07  3.73  17.6     0     0     3     3
 5  15.2  276.   180  3.07  3.78  18       0     0     3     3
 6  10.4  472    205  2.93  5.25  18.0     0     0     3     4
 7  10.4  460    215  3     5.42  17.8     0     0     3     4
 8  14.7  440    230  3.23  5.34  17.4     0     0     3     4
 9  15.5  318    150  2.76  3.52  16.9     0     0     3     2
10  15.2  304    150  3.15  3.44  17.3     0     0     3     2
11  13.3  350    245  3.73  3.84  15.4     0     0     3     4
12  19.2  400    175  3.08  3.84  17.0     0     0     3     2
13  15.8  351    264  4.22  3.17  14.5     0     1     5     4
14  15    301    335  3.54  3.57  14.6     0     1     5     8</code></pre>
</div>
</div>
<p>Bu arada yukarıda bu işin <code>split</code> komutuyla nasıl hızlıca yapıldığı gösterilmişti. Ama şu aşamada vurgulamak istediğim genellikle webcrawling sonrası json veya list tipinde veri alıyorum ve amaç bu veriyi formatlamak. İşte eğer sanal olarak oluşturulan bu listin webcrawling sonucu elde edildiğini varsayarsak, <code>tibble</code> komutu ile yukarıda bahsettiğim forma ulaşabiliyorum.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="fu">names</span>(mt_nest_List),(mt_nest_List))</span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  `names(mt_nest_List)` `(mt_nest_List)`  
  &lt;chr&gt;                 &lt;named list&gt;      
1 4                     &lt;tibble [7 × 10]&gt; 
2 6                     &lt;tibble [11 × 10]&gt;
3 8                     &lt;tibble [14 × 10]&gt;</code></pre>
</div>
</div>
<p>Bu işi nest’ten daha iyi yapan komut <code>enframe</code>. Aşağıda onunla çalıştım.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Modify_depth
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Zaman zaman veriyi rectangular forma dönüştürmeden de list’in çeşitli seviyelerinden veri çekme ihtiyacı olabiliyor.</p>
<p>https://purrr.tidyverse.org/reference/modify.html adresinde konu ile ilgili detaylı açıklama ve çok sayıda örnek mevcut.</p>
<p>Aşağıdaki örnekte bir nested list içinde, obj birinci seviye, prop ikinci seviye ve param üçüncü seviye.</p>
<ol start="2" type="1">
<li>seviyeden (prop) tüm değerleri çekmek için modify depth kullanılabilir.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>l1 <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">obj1 =</span> <span class="fu">list</span>(</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">prop1 =</span> <span class="fu">list</span>(<span class="at">param1 =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">param2 =</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">4</span>),</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">prop2 =</span> <span class="fu">list</span>(<span class="at">param1 =</span> <span class="dv">5</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">param2 =</span> <span class="dv">7</span><span class="sc">:</span><span class="dv">8</span>)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">obj2 =</span> <span class="fu">list</span>(</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">prop1 =</span> <span class="fu">list</span>(<span class="at">param1 =</span> <span class="dv">9</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">param2 =</span> <span class="dv">11</span><span class="sc">:</span><span class="dv">12</span>),</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">prop2 =</span> <span class="fu">list</span>(<span class="at">param1 =</span> <span class="dv">12</span><span class="sc">:</span><span class="dv">14</span>, <span class="at">param2 =</span> <span class="dv">15</span><span class="sc">:</span><span class="dv">17</span>)</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>l2 <span class="ot">&lt;-</span> l1 <span class="sc">%&gt;%</span> <span class="fu">modify_depth</span>(<span class="dv">2</span>, <span class="st">"param1"</span>)</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>l2</span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$obj1
$obj1$prop1
[1] 1 2

$obj1$prop2
[1] 5 6


$obj2
$obj2$prop1
[1]  9 10

$obj2$prop2
[1] 12 13 14</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="enframe" class="level1">
<h1>Enframe</h1>
<p>NFT Datasının içinden trait verileri alıp bir tibble’a dönüştürme işiyla başlıyorum. Aslında verinin içinde trait alt listesinin yapısı son derece düzgün. Amaç bunu dönüştürmek. Temel sıkıntı tekrar etmesi gereken name değerleri var.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"nft_traits.rda"</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">reactjson</span>(rc_traits_data,<span class="at">collapsed =</span> <span class="dv">2</span>)</span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="reactjson html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-8f4de083d9dae9b17084" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-8f4de083d9dae9b17084">{"x":{"data":{"collection":{"editors":["0x184d2b149ff1a39444a01df2ef47ad4e4a89dc43","0xdc714dba9b94474b815e9d556454d0e4fe2253ae","0x83c2a6ffd992b3775da96eca53a779144dc56b9d","0x429ed25bcd3b0ac3632dab6b32c21a78c67ea8e6"],"payment_tokens":[{"id":13689077,"symbol":"ETH","address":"0x0000000000000000000000000000000000000000","image_url":"https://openseauserdata.com/files/6f8e2979d428180222796ff4a33ab929.svg","name":"Ether","decimals":18,"eth_price":1,"usd_price":1645.48},{"id":12182941,"symbol":"DAI","address":"0x6b175474e89094c44da98b954eedeac495271d0f","image_url":"https://openseauserdata.com/files/dai-ethereum.svg","name":"Dai Stablecoin","decimals":18,"eth_price":0.00060775,"usd_price":1},{"id":4645681,"symbol":"WETH","address":"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2","image_url":"https://openseauserdata.com/files/accae6b6fb3888cbff27a013729c22dc.svg","name":"Wrapped Ether","decimals":18,"eth_price":1,"usd_price":1645.48},{"id":4403908,"symbol":"USDC","address":"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48","image_url":"https://openseauserdata.com/files/749015f009a66abcb3bbb3502ae2f1ce.svg","name":"USD Coin","decimals":6,"eth_price":0.00060773,"usd_price":1}],"is_collection_offers_enabled":true,"primary_asset_contracts":[{"address":"0xcfff4c8c0df0e2431977eba7df3d3de857f4b76e","asset_contract_type":"non-fungible","created_date":"2021-08-15T05:34:52.669499","name":"RiverMen","nft_version":"3.0","opensea_version":[],"owner":260090723,"schema_name":"ERC721","symbol":"RM","total_supply":"0","description":"Rivermen is a gamified NFT collection based on blockchain technology, created by the Cthuwork&NA team using elements from the voxel version of the “Along the River During Qingming Festival”. The voxel version of “Along the River During Qingming Festival” is a 3D artwork reinterpreting this long scroll, as one of the top ten famous Chinese paintings.\nThe RIVER refers to the \"Bian River\" in this ancient painting scroll. Each person in this scene has a unique identity. The Rivermen are the good neighbors and cool folks living in the \"Bianriverse\".\nThey are not ancient nor modern, but aboriginal people of the \"Bianriverse\", which is a metaverse based on \"Along the River During the Qingming Festival\". They will spend some quality time together in the Bianriverse.\nRiverSpace：https://opensea.io/collection/river-space\nRiverEstate：https://opensea.io/collection/riverestate\nRiverArt：https://opensea.io/collection/riverart\nRivermenGift：https://opensea.io/collection/rivermengift","external_link":"https://rivermen.io/","image_url":"https://i.seadn.io/gae/Kc96kxOK06q1eJ5n_xEp_xExRvEue0NdN2NdjAvleeru1k8XoBhgMkqLayoKKiBpYyvPnva2IPhlFbMw0IW1_-YOL96r-zvtIA_DcA?w=500&auto=format","default_to_fiat":false,"dev_buyer_fee_basis_points":0,"dev_seller_fee_basis_points":500,"only_proxied_transfers":false,"opensea_buyer_fee_basis_points":0,"opensea_seller_fee_basis_points":0,"buyer_fee_basis_points":0,"seller_fee_basis_points":500,"payout_address":"0x53ecf0b18b27d3d06a4ed24b095694c5adca8ab7"}],"traits":{"Type":{"human 3":1774,"zombie":1983,"human 4":1061,"human 1":2292,"human 2":1792,"ghost":1098},"Hat":{"crown":415,"top hat":384,"orchid (potted plant)":176,"pavilion headwear":172,"buddha halo":190,"helmet":397,"centre parting":604,"long winged officer hat":198,"winged cap":315,"double tail":597,"silk thread towel":189,"chrysanthemum (potted plant)":206,"bamboo hat":507,"imperial crown":405,"plum (potted plant)":209,"tilted frisette":601,"bamboo (potted plant)":210,"flag head":340,"single ponytail":520,"golden phoenix crown":192,"double hair updo":344,"cloudy updo":364,"blue phoenix crown":184,"red phoenix crown":197,"miao silver":383,"none":16,"low hat":341,"diaochan hat":348,"taoist hat":357,"haetae hat":337,"literati hat":302},"Head":{"dazed expression":2956,"smiley face":2531,"embarrassed expression":2027,"nine barrels":45,"surprised expression":1632,"kirin":173,"steamed stuffed bun":34,"buddha":81,"noodle":23,"chinese dragon":73,"rice dumpling":29,"dumplings":20,"three barrels":14,"a barrel":25,"facial design of beijing opera":128,"rice":21,"two barrels":25,"eight barrels":27,"six barrels":16,"steamed bun":34,"seven barrels":28,"teapot":10,"four barrels":14,"five barrels":15,"cup":19},"Jacket":{"blue contrast jacket":496,"dark red sweater":374,"brown jacket":315,"orange contrast jacket":408,"dark blue sweater":470,"purple contrast jacket":190,"black and green jacket":475,"dark blue contrast jacket":247,"dark gray sweater":280,"black coat":345,"dark green sweater":167,"green contrast jacket":359,"off-white color matching short sleeves":316,"purple jacket":377,"green jacket":180,"red contrast jacket":375,"green color matching short sleeves":478,"red coat":352,"red jacket":157,"dark green jacket":463,"pink coat":268,"deep purple sweatshirt":384,"blue coat":383,"light green color matching short sleeves":177,"sky blue color matching short sleeves":303,"blue jacket":256,"lavender color matching short sleeves":409,"light blue color matching short sleeves":254,"dark green sweatshirt":385,"light green jacket":357},"Trousers":{"orange trousers":350,"sky blue shorts":386,"black shorts":365,"purple overalls":389,"green shorts":491,"black functional pants":333,"rose red trousers":502,"blue striped pants":283,"purple trousers":268,"yellow-green striped pants":463,"blue and white overalls":293,"purple functional pants":170,"blue and green cargo pants":338,"brown striped pants":364,"pink and green functional pants":370,"pink functional pants":441,"black trousers":360,"orange shorts":288,"grey trousers":380,"blue and white striped pants":356,"light yellow shorts":183,"grey overalls":468,"blue functional pants":329,"denim shorts":359,"grey striped pants":353,"sky blue trousers":169,"khaki overalls":348,"blue grey cargo pants":178,"green functional pants":254,"fuchsia striped pants":169},"Shoes":{"zijin dynasty skate shoes":197,"yellow boots":203,"night city army boots":195,"tropical beach shoes":202,"blue and purple beach shoes":134,"macaron army boots":117,"void tooling shoes":176,"pink and white beach shoes":164,"brown martin boots":179,"grey martin boots":233,"red leather shoes":196,"blue and gray leather shoes":230,"red skate shoes":162,"dark brown army boots":160,"avocado army boots":137,"pink sandals":181,"sky blue basketball shoes":88,"heat tooling shoes":183,"blue and green boots":180,"blue sandals":221,"summer martin boots":133,"purple martin boots":94,"white boots":86,"red sandals":172,"red and blue beach shoes":234,"brown skate shoes":244,"red boots":175,"green basketball shoes":197,"grey sandals":85,"orange martin boots":173,"brown leather shoes":128,"night city tooling shoes":129,"blue basketball shoes":157,"blue and black boots":159,"purple sweet potato military boots":174,"macaron tooling shoes":94,"martin boots":194,"yellow leather shoes":75,"retro style skate shoes":86,"pink basketball shoes":200,"gypsy tooling shoes":168,"light brown army boots":213,"orange boots":144,"turquoise skateboard shoes":124,"summer beach shoes":180,"red and blue boots":264,"grey skate shoes":165,"ice cream boots":208,"green leather shoes":191,"light green basketball shoes":137,"ice cream beach shoes":67,"orange basketball shoes":269,"green boots":234,"mamba tooling shoes":230,"novice boots":137,"green sandals":172,"eskimo boots":82,"khaki sandals":132,"pink leather shoes":207,"blue boots":149},"USED":{"yes":5091,"no":4909},"Identity":{"the pedestrian":50,"tax officer a":55,"boatman a":50,"the restaurant owner":50,"the fortune-telling customer a":49,"the director":50,"the passing-by wooden-luggage porter":55,"the traveler on the bridge":49,"the vendor":50,"carter c":49,"a passer-by with a burden":50,"wine-carrying solider a":55,"the waiting coachman":50,"the restaurant customer":50,"restaurant guest b":49,"servant b":50,"chatting teahouse guest b":50,"the bellman":55,"a father and a son":50,"chatting teahouse guest, a":50,"sculling boatman b":49,"bystander d":50,"the house horse-leading servant":55,"the delivery boaters":50,"idle soldier d":49,"the store owner":50,"restaurant guest a":50,"the following porter":50,"the cake stand owner":50,"the walking-by porter":50,"warning boatman a":50,"the house pole-carrying servant":50,"the palanquin-carrier of the civil official":50,"the hotel waiter":50,"the vegetable farmer":50,"the caravan leader":50,"the child-holding woman":50,"the absent-minded pedestrian":50,"the barge haulers":50,"traveler b":50,"idle soldier a":50,"the babycaring maid":50,"silk store customer a":50,"warning boatman c":50,"teahouse guest b":50,"the coachman of the civil official":50,"the young farmer":49,"monks":10,"the shoes-trying-on customers":49,"the pedestrians":50,"the shading scholar":50,"chatting teahouse guest c":50,"the horse-chasing coachman":50,"the wheaten food vendor":49,"restaurant guest c":50,"barge hauler a":49,"water carrier b":49,"confucian student a":49,"the taciturn seller":15,"the palanquin-carrier":55,"the scholar in white":49,"the beauty in red":49,"the cordage stall owner":50,"the cart hauler":50,"the walking officer":50,"traveler a":50,"the laundering old woman":50,"ship passenger b":50,"the lamb stall owner":15,"the bargaining drinker":50,"drinker b":50,"the furniture store owner":50,"the rich student":15,"the treating teenager":50,"warning boatman b":50,"cash-in-transit guard a":50,"arguing scholar b":55,"traveler c":50,"caravan followers":50,"carter a":49,"the clinic doctor":50,"the horse-riding passer-by":50,"the old shaving man":50,"barge hauler b":50,"the lookers-on":49,"ship passenger a":50,"the divination interpreter":50,"the herb-drinks vendor":50,"the easy porter":55,"shipmate b":50,"the inviting scholar":55,"the flower buyer":50,"carter b":49,"the audience":50,"sculler-holding boatman d":49,"the bodyguard servant":50,"the old donkey-riding lady":50,"teahouse guest c":50,"the tea drinking customers":50,"the poling boatman":50,"fortune teller a":50,"the way-asking countryman":50,"the wine cart fella":50,"the sacrificing boatman":50,"tax officer c":55,"the touring scholar":53,"bystander c":49,"the boatman-in-command":50,"sculler-holding boatman a":50,"boatman b":50,"the drinking customer":49,"the teenage farmer":50,"the old seller":50,"the wandering -around passersby":55,"the halting passer-by":50,"the inn owner":50,"wine-carrying solider b":54,"the shipowner":49,"troubled carter b":50,"confucian student b":50,"the cart puller":50,"the buyer":50,"the flower seller":50,"the palanquin-carrying servants":50,"the matchmaker":52,"silk store customer b":49,"the smuggler":49,"the wine carter":50,"water carrier a":50,"the paraffin oil buyer":50,"the soldier":50,"sculling boatman c":48,"the pondering scholar":55,"the fortune-telling customer":50,"the old charcoal seller":15,"the toy vendor":50,"farmer b":50,"cash-in-transit guard b":50,"cake stand customers":50,"the arguing carter":54,"the restaurant waiter":50,"the horse-riding master":50,"servant a":50,"the flower-buying hostess":50,"the accompanying women":49,"the military official":15,"teahouse guest a":50,"the horse-leading servant":50,"the panicking baby-holding woman":50,"the rest-taking porter":49,"the fortune-telling looker-on":50,"the discontent bystander":50,"the wheel carpenters":50,"the pole-carrying servant":49,"idle soldier c":50,"bystander a":50,"shipmate a":50,"water carrier c":50,"the delivery man":50,"the old donkey-riding man":50,"the mysterious hostess":54,"the salt store owner":50,"idle soldier b":49,"the audience with a child":50,"the bending bystander":50,"troubled carter a":50,"the annoyed scholar":55,"tax officer b":55,"the flower stall owner":50,"the storyteller":50,"the exhausted porter":55,"drinker a":50,"sculler-holding boatman b":50,"the fan-holding scholar":55,"the luggage-carrying coachman":50,"the tavern waiter":50,"the rest-taking boatman":50,"the paper horse vendor":50,"the following servant":50,"the prayer-holding host":50,"bystander b":49,"the traveling scholar":50,"arguing scholar a":54,"the refuged porter":50,"the begging monk":49,"farmer a":50,"the wood-milling carpenter":50,"the rich man":50,"the cordage stall customers":49,"the shaving customer":50,"the passing-by porter":50,"the inquirying woman":50,"the deputy military official":50,"the bow-shooting officer":55,"the sheep butcher":50,"drunk soldier a":48,"drunk soldier b":50,"the fortune teller":49,"the noble lady":50,"sculler-holding boatman c":49,"the guiding doorkeeper":50,"sculling boatman a":50},"Background":{"background 2":1378,"background 7":1310,"background 5":1432,"background 4":1501,"background 1":1485,"background 6":1416,"background 3":1478}},"stats":{"one_hour_volume":1.748800000000001,"one_hour_change":1.732499957084656,"one_hour_sales":22,"one_hour_sales_change":1.75,"one_hour_average_price":0.07949090909090911,"one_hour_difference":1.1088,"six_hour_volume":4.509800000000002,"six_hour_change":1.296232223510742,"six_hour_sales":57,"six_hour_sales_change":1.279999971389771,"six_hour_average_price":0.07911929824561408,"six_hour_difference":2.545800000000002,"one_day_volume":233.8624400000008,"one_day_change":0.2826482057571411,"one_day_sales":198,"one_day_sales_change":0.1314285695552826,"one_day_average_price":1.181123434343438,"one_day_difference":51.53463000000133,"seven_day_volume":537.3888700000037,"seven_day_change":1246.131283360417,"seven_day_sales":525,"seven_day_average_price":1.023597847619055,"seven_day_difference":536.9579700000038,"thirty_day_volume":538.9754700000036,"thirty_day_change":272.9114041774679,"thirty_day_sales":551,"thirty_day_average_price":0.9781768965517307,"thirty_day_difference":537.0077700000036,"total_volume":1833.24677959707,"total_sales":5741,"total_supply":9992,"count":9992,"num_owners":1528,"average_price":0.3193253404628236,"num_reports":1,"market_cap":10227.7896934096,"floor_price":0.08},"banner_image_url":"https://i.seadn.io/gae/VZowVg9mtZOBs0NGB9Mq6q4I2ZS1_drtc9K_0QPgBtgAvuoaOdfnwr7zQrqujj9sWfuiJCoiLImSDaLjCNnf05TCbAFl_EarqG_dTw?w=500&auto=format","chat_url":[],"created_date":"2021-08-15T08:00:37.309132+00:00","default_to_fiat":false,"description":"Rivermen is a gamified NFT collection based on blockchain technology, created by the Cthuwork&NA team using elements from the voxel version of the “Along the River During Qingming Festival”. The voxel version of “Along the River During Qingming Festival” is a 3D artwork reinterpreting this long scroll, as one of the top ten famous Chinese paintings.\nThe RIVER refers to the \"Bian River\" in this ancient painting scroll. Each person in this scene has a unique identity. The Rivermen are the good neighbors and cool folks living in the \"Bianriverse\".\nThey are not ancient nor modern, but aboriginal people of the \"Bianriverse\", which is a metaverse based on \"Along the River During the Qingming Festival\". They will spend some quality time together in the Bianriverse.\nRiverSpace：https://opensea.io/collection/river-space\nRiverEstate：https://opensea.io/collection/riverestate\nRiverArt：https://opensea.io/collection/riverart\nRivermenGift：https://opensea.io/collection/rivermengift","dev_buyer_fee_basis_points":"0","dev_seller_fee_basis_points":"500","discord_url":"https://discord.gg/rivermen","display_data":{"card_display_style":"contain","images":[]},"external_url":"https://rivermen.io/","featured":false,"featured_image_url":"https://i.seadn.io/gae/wz2X5eupdm0HzsTRFvpqI86VBNEGgq1XH9V4kKAs5-rppnBpM2gASLp2bDvJpLzYzDlIHRLwqsi2GMOpI71jLL56-wN67VGl7XBCPBQ?w=500&auto=format","hidden":false,"safelist_request_status":"verified","image_url":"https://i.seadn.io/gae/Kc96kxOK06q1eJ5n_xEp_xExRvEue0NdN2NdjAvleeru1k8XoBhgMkqLayoKKiBpYyvPnva2IPhlFbMw0IW1_-YOL96r-zvtIA_DcA?w=500&auto=format","is_subject_to_whitelist":false,"large_image_url":"https://i.seadn.io/gae/wz2X5eupdm0HzsTRFvpqI86VBNEGgq1XH9V4kKAs5-rppnBpM2gASLp2bDvJpLzYzDlIHRLwqsi2GMOpI71jLL56-wN67VGl7XBCPBQ?w=500&auto=format","medium_username":"Rivermen","name":"Rivermen","only_proxied_transfers":false,"opensea_buyer_fee_basis_points":"0","opensea_seller_fee_basis_points":0,"payout_address":"0x53ecf0b18b27d3d06a4ed24b095694c5adca8ab7","require_email":false,"short_description":[],"slug":"rivermen","telegram_url":"https://t.me/RivermenEN","twitter_username":"RivermenNFT","instagram_username":"rivermen_nft/","wiki_url":[],"is_nsfw":false,"fees":{"seller_fees":{"0x53ecf0b18b27d3d06a4ed24b095694c5adca8ab7":500},"opensea_fees":{}},"is_rarity_enabled":false,"is_creator_fees_enforced":false}},"name":"root","theme":"rjv-default","iconStyle":"circle","indentWidth":4,"collapsed":2,"collapseStringsAfterLength":false,"groupArraysAfterLength":100,"enableClipboard":true,"displayObjectSize":true,"displayDataTypes":true,"onEdit":true,"onAdd":true,"onDelete":true,"onSelect":true,"sortKeys":false},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Enframe ile baştan bir yapı empoze edilebiliyor.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>d0 <span class="ot">&lt;-</span> rc_traits_data<span class="sc">$</span>collection<span class="sc">$</span>traits</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>d1 <span class="ot">&lt;-</span> d0 <span class="sc">%&gt;%</span> <span class="fu">enframe</span>(<span class="at">name =</span> <span class="st">"name"</span>, <span class="at">value =</span> <span class="st">"values"</span>)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>d1</span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 2
  name       values            
  &lt;chr&gt;      &lt;list&gt;            
1 Type       &lt;named list [6]&gt;  
2 Hat        &lt;named list [31]&gt; 
3 Head       &lt;named list [25]&gt; 
4 Jacket     &lt;named list [30]&gt; 
5 Trousers   &lt;named list [30]&gt; 
6 Shoes      &lt;named list [60]&gt; 
7 USED       &lt;named list [2]&gt;  
8 Identity   &lt;named list [202]&gt;
9 Background &lt;named list [7]&gt;  </code></pre>
</div>
</div>
<p>Amaç values sütununda bulunan her list’i tibble’a dönüştürmek. Aşağıdaki kodu anlamak çok kritik. Tibble içinde map işlemi nasıl yapılır onu gösteriyor. İki farklı şekilde aynı sonuca ulaşıyorum. Birincisinde satır bazında her list’in uzunluğunu hesaplatıyorum. İkincisinde ise tek defada bütün values kolonuna işlem uygulayıp yeni değişken oluşturuyorum.</p>
<p>Daha basitleştirmek için: bir tibble içinde bir değişkeni iki ile çarparak yeni bir değişken oluşturmak istensin. Nasıl yapılır? İki yolu var. Birincisi, satır bazında işlem yapılır. Excel’de olduğu gibi. Yan hücrenin iki katını al, aşağıya şek. Eğer hücre bazına indirmeden length hesaplamaya kalkılırsa bütün kolonunun length’i hesaplanıp her hücreye yazılır ki bu bir hatadır. İkinci yol ise vektör operasyonu kullanmak. Değişkeni bir vektör olarak alıp, vektörü iki ile çarpıp, sonucu tibble’a yeni bir değişken olarak yerleştirmek. İşte <code>map</code> ile yapılan ikincisi. Bu işlem çok daha hızlı oluyor.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>d2<span class="fl">.0</span> <span class="ot">&lt;-</span> d1 <span class="sc">%&gt;%</span> <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">n_t=</span><span class="fu">length</span>(values))</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>d2<span class="fl">.0</span></span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 3
# Rowwise: 
  name       values               n_t
  &lt;chr&gt;      &lt;list&gt;             &lt;int&gt;
1 Type       &lt;named list [6]&gt;       6
2 Hat        &lt;named list [31]&gt;     31
3 Head       &lt;named list [25]&gt;     25
4 Jacket     &lt;named list [30]&gt;     30
5 Trousers   &lt;named list [30]&gt;     30
6 Shoes      &lt;named list [60]&gt;     60
7 USED       &lt;named list [2]&gt;       2
8 Identity   &lt;named list [202]&gt;   202
9 Background &lt;named list [7]&gt;       7</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>d2.<span class="fl">0.</span>error <span class="ot">&lt;-</span> d1 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">n_t=</span><span class="fu">length</span>(values))</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>d2.<span class="fl">0.</span>error</span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 3
  name       values               n_t
  &lt;chr&gt;      &lt;list&gt;             &lt;int&gt;
1 Type       &lt;named list [6]&gt;       9
2 Hat        &lt;named list [31]&gt;      9
3 Head       &lt;named list [25]&gt;      9
4 Jacket     &lt;named list [30]&gt;      9
5 Trousers   &lt;named list [30]&gt;      9
6 Shoes      &lt;named list [60]&gt;      9
7 USED       &lt;named list [2]&gt;       9
8 Identity   &lt;named list [202]&gt;     9
9 Background &lt;named list [7]&gt;       9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>d2 <span class="ot">&lt;-</span> d1 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">n_t =</span> <span class="fu">map_int</span>(values,length))</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>d2</span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 3
  name       values               n_t
  &lt;chr&gt;      &lt;list&gt;             &lt;int&gt;
1 Type       &lt;named list [6]&gt;       6
2 Hat        &lt;named list [31]&gt;     31
3 Head       &lt;named list [25]&gt;     25
4 Jacket     &lt;named list [30]&gt;     30
5 Trousers   &lt;named list [30]&gt;     30
6 Shoes      &lt;named list [60]&gt;     60
7 USED       &lt;named list [2]&gt;       2
8 Identity   &lt;named list [202]&gt;   202
9 Background &lt;named list [7]&gt;       7</code></pre>
</div>
</div>
<p>Yazının devamında bu yapıyı <code>unnest_longer kullanarak düzenliyorum</code></p>
</section>
<section id="rectangling" class="level1">
<h1>Rectangling</h1>
<section id="purrrlist_." class="level2">
<h2 class="anchored" data-anchor-id="purrrlist_.">purrr::list_.</h2>
<p>Eğer split, nest veya enframe benzeri bir şekilde oluşturulan yapıya benzer (en dış isimler, bir alt seviye dataframeler) bir listten tibble’a dönüşüm gerekirse; en kolayı <code>purrr</code> kütüphanesi içinde <code>list_rbind</code> kullanmak. Ancak bu gerçekten çok spesifik bir durum. Çünkü ikinci seviyede tüm elemanların data.frame olması şart, vektör olmaları yetmez.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(purrr<span class="sc">::</span><span class="fu">list_rbind</span>(CO2List))</span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Plant   Type  Treatment conc uptake
1   Qn1 Quebec nonchilled   95   16.0
2   Qn1 Quebec nonchilled  175   30.4
3   Qn1 Quebec nonchilled  250   34.8
4   Qn1 Quebec nonchilled  350   37.2
5   Qn1 Quebec nonchilled  500   35.3
6   Qn1 Quebec nonchilled  675   39.2</code></pre>
</div>
</div>
<p>Daha da ilginci ve daha sık kullanılma potansiyeli olan ise <code>name</code> argümanını da devreye sokmak:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(purrr<span class="sc">::</span><span class="fu">list_rbind</span>(CO2List,<span class="at">names_to =</span> <span class="st">"names"</span>))</span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>              names Plant   Type  Treatment conc uptake
1 Quebec.nonchilled   Qn1 Quebec nonchilled   95   16.0
2 Quebec.nonchilled   Qn1 Quebec nonchilled  175   30.4
3 Quebec.nonchilled   Qn1 Quebec nonchilled  250   34.8
4 Quebec.nonchilled   Qn1 Quebec nonchilled  350   37.2
5 Quebec.nonchilled   Qn1 Quebec nonchilled  500   35.3
6 Quebec.nonchilled   Qn1 Quebec nonchilled  675   39.2</code></pre>
</div>
</div>
<p>Elbette yukarıdaki örnekler içinde bu yöntemin çalışacağı diğer örnek split ile oluşturulan mtList.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(purrr<span class="sc">::</span><span class="fu">list_rbind</span>(mtList))</span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                mpg cyl  disp hp drat    wt  qsec vs am gear carb
Datsun 710     22.8   4 108.0 93 3.85 2.320 18.61  1  1    4    1
Merc 240D      24.4   4 146.7 62 3.69 3.190 20.00  1  0    4    2
Merc 230       22.8   4 140.8 95 3.92 3.150 22.90  1  0    4    2
Fiat 128       32.4   4  78.7 66 4.08 2.200 19.47  1  1    4    1
Honda Civic    30.4   4  75.7 52 4.93 1.615 18.52  1  1    4    2
Toyota Corolla 33.9   4  71.1 65 4.22 1.835 19.90  1  1    4    1</code></pre>
</div>
</div>
</section>
<section id="tidyr" class="level2">
<h2 class="anchored" data-anchor-id="tidyr">tidyr</h2>
<p>List yapısını en başarılı şekilde matris formuna dönüştüren kütüphane. Kullanmayı iyi bir şekilde öğrenmem gereken topu topu 3 fonksiyon var.</p>
<p>Burada https://tidyr.tidyverse.org/articles/rectangle.html adresindeki örnekleri detaylandıracağım. <code>gh_users</code> verisi github kullanıcısı 6 kişinin bilgilerini içeriyor. İki seviye list şeklinde ama anadallardan itibaren içerisinin formu her dal için aynı.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(gh_users)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">reactjson</span>(gh_users,<span class="at">collapsed =</span> <span class="dv">2</span>)</span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="reactjson html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-f2e1ec015f9a73371005" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-f2e1ec015f9a73371005">{"x":{"data":[{"login":"gaborcsardi","id":660288,"avatar_url":"https://avatars.githubusercontent.com/u/660288?v=3","gravatar_id":"","url":"https://api.github.com/users/gaborcsardi","html_url":"https://github.com/gaborcsardi","followers_url":"https://api.github.com/users/gaborcsardi/followers","following_url":"https://api.github.com/users/gaborcsardi/following{/other_user}","gists_url":"https://api.github.com/users/gaborcsardi/gists{/gist_id}","starred_url":"https://api.github.com/users/gaborcsardi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gaborcsardi/subscriptions","organizations_url":"https://api.github.com/users/gaborcsardi/orgs","repos_url":"https://api.github.com/users/gaborcsardi/repos","events_url":"https://api.github.com/users/gaborcsardi/events{/privacy}","received_events_url":"https://api.github.com/users/gaborcsardi/received_events","type":"User","site_admin":false,"name":"Gábor Csárdi","company":"Mango Solutions, @MangoTheCat ","blog":"http://gaborcsardi.org","location":"Chippenham, UK","email":"csardi.gabor@gmail.com","hireable":[],"bio":[],"public_repos":52,"public_gists":6,"followers":303,"following":22,"created_at":"2011-03-09T17:29:25Z","updated_at":"2016-10-11T11:05:06Z"},{"login":"jennybc","id":599454,"avatar_url":"https://avatars.githubusercontent.com/u/599454?v=3","gravatar_id":"","url":"https://api.github.com/users/jennybc","html_url":"https://github.com/jennybc","followers_url":"https://api.github.com/users/jennybc/followers","following_url":"https://api.github.com/users/jennybc/following{/other_user}","gists_url":"https://api.github.com/users/jennybc/gists{/gist_id}","starred_url":"https://api.github.com/users/jennybc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jennybc/subscriptions","organizations_url":"https://api.github.com/users/jennybc/orgs","repos_url":"https://api.github.com/users/jennybc/repos","events_url":"https://api.github.com/users/jennybc/events{/privacy}","received_events_url":"https://api.github.com/users/jennybc/received_events","type":"User","site_admin":false,"name":"Jennifer (Jenny) Bryan","company":"University of British Columbia","blog":"https://twitter.com/JennyBryan","location":"Vancouver, BC, Canada","email":[],"hireable":[],"bio":"prof at UBC, humane #rstats, statistics, teach @STAT545-UBC, leadership of @rOpenSci, @rsheets, academic director @ubc-mds","public_repos":168,"public_gists":54,"followers":780,"following":34,"created_at":"2011-02-03T22:37:41Z","updated_at":"2016-10-24T07:20:26Z"},{"login":"jtleek","id":1571674,"avatar_url":"https://avatars.githubusercontent.com/u/1571674?v=3","gravatar_id":"","url":"https://api.github.com/users/jtleek","html_url":"https://github.com/jtleek","followers_url":"https://api.github.com/users/jtleek/followers","following_url":"https://api.github.com/users/jtleek/following{/other_user}","gists_url":"https://api.github.com/users/jtleek/gists{/gist_id}","starred_url":"https://api.github.com/users/jtleek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtleek/subscriptions","organizations_url":"https://api.github.com/users/jtleek/orgs","repos_url":"https://api.github.com/users/jtleek/repos","events_url":"https://api.github.com/users/jtleek/events{/privacy}","received_events_url":"https://api.github.com/users/jtleek/received_events","type":"User","site_admin":false,"name":"Jeff L.","company":[],"blog":"http://biostat.jhsph.edu/~jleek/","location":"Baltimore,MD","email":[],"hireable":[],"bio":[],"public_repos":67,"public_gists":12,"followers":3958,"following":6,"created_at":"2012-03-24T18:16:43Z","updated_at":"2016-10-05T13:03:04Z"},{"login":"juliasilge","id":12505835,"avatar_url":"https://avatars.githubusercontent.com/u/12505835?v=3","gravatar_id":"","url":"https://api.github.com/users/juliasilge","html_url":"https://github.com/juliasilge","followers_url":"https://api.github.com/users/juliasilge/followers","following_url":"https://api.github.com/users/juliasilge/following{/other_user}","gists_url":"https://api.github.com/users/juliasilge/gists{/gist_id}","starred_url":"https://api.github.com/users/juliasilge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/juliasilge/subscriptions","organizations_url":"https://api.github.com/users/juliasilge/orgs","repos_url":"https://api.github.com/users/juliasilge/repos","events_url":"https://api.github.com/users/juliasilge/events{/privacy}","received_events_url":"https://api.github.com/users/juliasilge/received_events","type":"User","site_admin":false,"name":"Julia Silge","company":[],"blog":"juliasilge.com","location":"Salt Lake City, UT","email":[],"hireable":[],"bio":"Data science and visualization, #rstats, parenthood, reading, food/wine/coffee, #NASADatanauts.","public_repos":26,"public_gists":4,"followers":115,"following":10,"created_at":"2015-05-19T02:51:23Z","updated_at":"2016-10-20T10:41:43Z"},{"login":"leeper","id":3505428,"avatar_url":"https://avatars.githubusercontent.com/u/3505428?v=3","gravatar_id":"","url":"https://api.github.com/users/leeper","html_url":"https://github.com/leeper","followers_url":"https://api.github.com/users/leeper/followers","following_url":"https://api.github.com/users/leeper/following{/other_user}","gists_url":"https://api.github.com/users/leeper/gists{/gist_id}","starred_url":"https://api.github.com/users/leeper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leeper/subscriptions","organizations_url":"https://api.github.com/users/leeper/orgs","repos_url":"https://api.github.com/users/leeper/repos","events_url":"https://api.github.com/users/leeper/events{/privacy}","received_events_url":"https://api.github.com/users/leeper/received_events","type":"User","site_admin":false,"name":"Thomas J. Leeper","company":"London School of Economics","blog":"http://www.thomasleeper.com","location":"London, United Kingdom","email":[],"hireable":true,"bio":"Political scientist and R hacker. Interested in open science, public opinion research, surveys, experiments, crowdsourcing, and cloud computing.","public_repos":99,"public_gists":46,"followers":213,"following":230,"created_at":"2013-02-07T21:07:00Z","updated_at":"2016-10-20T10:36:25Z"},{"login":"masalmon","id":8360597,"avatar_url":"https://avatars.githubusercontent.com/u/8360597?v=3","gravatar_id":"","url":"https://api.github.com/users/masalmon","html_url":"https://github.com/masalmon","followers_url":"https://api.github.com/users/masalmon/followers","following_url":"https://api.github.com/users/masalmon/following{/other_user}","gists_url":"https://api.github.com/users/masalmon/gists{/gist_id}","starred_url":"https://api.github.com/users/masalmon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/masalmon/subscriptions","organizations_url":"https://api.github.com/users/masalmon/orgs","repos_url":"https://api.github.com/users/masalmon/repos","events_url":"https://api.github.com/users/masalmon/events{/privacy}","received_events_url":"https://api.github.com/users/masalmon/received_events","type":"User","site_admin":false,"name":"Maëlle Salmon","company":"ISGlobal","blog":"https://masalmon.github.io/","location":"Barcelona, Spain","email":[],"hireable":[],"bio":"I use R for getting, preparing, visualizing and analyzing data mostly about air quality & public health.","public_repos":31,"public_gists":0,"followers":34,"following":38,"created_at":"2014-08-05T08:10:04Z","updated_at":"2016-10-24T09:54:57Z"}],"name":"root","theme":"rjv-default","iconStyle":"circle","indentWidth":4,"collapsed":2,"collapseStringsAfterLength":false,"groupArraysAfterLength":100,"enableClipboard":true,"displayObjectSize":true,"displayDataTypes":true,"onEdit":true,"onAdd":true,"onDelete":true,"onSelect":true,"sortKeys":false},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Önce list’i tibble formatına getiriyoruz.Bu en dıştaki seviyeyi ortadan kaldırıyor. İçeride vektör formunda birbirinin aynı yapılar var.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>users <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">user =</span> gh_users)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>users</span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 1
  user             
  &lt;list&gt;           
1 &lt;named list [30]&gt;
2 &lt;named list [30]&gt;
3 &lt;named list [30]&gt;
4 &lt;named list [30]&gt;
5 &lt;named list [30]&gt;
6 &lt;named list [30]&gt;</code></pre>
</div>
</div>
<p>unnest_wider() fonksiyonunu ile hali hazırda düzenli olan yapıyı bir seviye dışarı taşıyoruz.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>userswide <span class="ot">&lt;-</span> users <span class="sc">%&gt;%</span> <span class="fu">unnest_wider</span>(user)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>userswide</span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 30
  login     id avatar_url gravatar_id url   html_url followers_url following_url
  &lt;chr&gt;  &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;         &lt;chr&gt;        
1 gabo… 6.60e5 https://a… ""          http… https:/… https://api.… https://api.…
2 jenn… 5.99e5 https://a… ""          http… https:/… https://api.… https://api.…
3 jtle… 1.57e6 https://a… ""          http… https:/… https://api.… https://api.…
4 juli… 1.25e7 https://a… ""          http… https:/… https://api.… https://api.…
5 leep… 3.51e6 https://a… ""          http… https:/… https://api.… https://api.…
6 masa… 8.36e6 https://a… ""          http… https:/… https://api.… https://api.…
# ℹ 22 more variables: gists_url &lt;chr&gt;, starred_url &lt;chr&gt;,
#   subscriptions_url &lt;chr&gt;, organizations_url &lt;chr&gt;, repos_url &lt;chr&gt;,
#   events_url &lt;chr&gt;, received_events_url &lt;chr&gt;, type &lt;chr&gt;, site_admin &lt;lgl&gt;,
#   name &lt;chr&gt;, company &lt;chr&gt;, blog &lt;chr&gt;, location &lt;chr&gt;, email &lt;chr&gt;,
#   hireable &lt;lgl&gt;, bio &lt;chr&gt;, public_repos &lt;int&gt;, public_gists &lt;int&gt;,
#   followers &lt;int&gt;, following &lt;int&gt;, created_at &lt;chr&gt;, updated_at &lt;chr&gt;</code></pre>
</div>
</div>
<p>But in this case, there are many components and we don’t need most of them so we can instead use hoist(). hoist() allows us to pull out selected components using the same syntax as purrr::pluck():</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>users <span class="sc">%&gt;%</span> <span class="fu">hoist</span>(user, </span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">followers =</span> <span class="st">"followers"</span>, </span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">login =</span> <span class="st">"login"</span>, </span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">url =</span> <span class="st">"html_url"</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  followers login       url                            user             
      &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;                          &lt;list&gt;           
1       303 gaborcsardi https://github.com/gaborcsardi &lt;named list [27]&gt;
2       780 jennybc     https://github.com/jennybc     &lt;named list [27]&gt;
3      3958 jtleek      https://github.com/jtleek      &lt;named list [27]&gt;
4       115 juliasilge  https://github.com/juliasilge  &lt;named list [27]&gt;
5       213 leeper      https://github.com/leeper      &lt;named list [27]&gt;
6        34 masalmon    https://github.com/masalmon    &lt;named list [27]&gt;</code></pre>
</div>
</div>
<p>Bu acaip bir şey. Elde eğer her satırda list olan bir yapı varsa, içinden parça parça değişken çıkartabiliyoruz.<br>
Düzenlemek istediğimiz list’in içi dataframe ise unnest_wider çalışmıyor. Örneğin mt_nest,</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>mt_nest_wide <span class="ot">&lt;-</span> mt_nest <span class="sc">%&gt;%</span> <span class="fu">unnest_wider</span>(data)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>mt_nest_wide</span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 11
    cyl         mpg        disp     hp  drat    wt  qsec    vs    am  gear  carb
  &lt;dbl&gt; &lt;list&lt;dbl&gt;&gt; &lt;list&lt;dbl&gt;&gt; &lt;list&gt; &lt;lis&gt; &lt;lis&gt; &lt;lis&gt; &lt;lis&gt; &lt;lis&gt; &lt;lis&gt; &lt;lis&gt;
1     6         [7]         [7]    [7]   [7]   [7]   [7]   [7]   [7]   [7]   [7]
2     4        [11]        [11]   [11]  [11]  [11]  [11]  [11]  [11]  [11]  [11]
3     8        [14]        [14]   [14]  [14]  [14]  [14]  [14]  [14]  [14]  [14]</code></pre>
</div>
</div>
<p>Düzgün görünmüyor bile, içerisini şu şekilde:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(mt_nest_wide)</span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-c8b5fa3d7ef893206172" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-c8b5fa3d7ef893206172">{"x":{"filter":"none","vertical":false,"data":[["1","2","3"],[6,4,8],[[21,21,21.4,18.1,19.2,17.8,19.7],[22.8,24.4,22.8,32.4,30.4,33.9,21.5,27.3,26,30.4,21.4],[18.7,14.3,16.4,17.3,15.2,10.4,10.4,14.7,15.5,15.2,13.3,19.2,15.8,15]],[[160,160,258,225,167.6,167.6,145],[108,146.7,140.8,78.7,75.7,71.09999999999999,120.1,79,120.3,95.09999999999999,121],[360,360,275.8,275.8,275.8,472,460,440,318,304,350,400,351,301]],[[110,110,110,105,123,123,175],[93,62,95,66,52,65,97,66,91,113,109],[175,245,180,180,180,205,215,230,150,150,245,175,264,335]],[[3.9,3.9,3.08,2.76,3.92,3.92,3.62],[3.85,3.69,3.92,4.08,4.93,4.22,3.7,4.08,4.43,3.77,4.11],[3.15,3.21,3.07,3.07,3.07,2.93,3,3.23,2.76,3.15,3.73,3.08,4.22,3.54]],[[2.62,2.875,3.215,3.46,3.44,3.44,2.77],[2.32,3.19,3.15,2.2,1.615,1.835,2.465,1.935,2.14,1.513,2.78],[3.44,3.57,4.07,3.73,3.78,5.25,5.424,5.345,3.52,3.435,3.84,3.845,3.17,3.57]],[[16.46,17.02,19.44,20.22,18.3,18.9,15.5],[18.61,20,22.9,19.47,18.52,19.9,20.01,18.9,16.7,16.9,18.6],[17.02,15.84,17.4,17.6,18,17.98,17.82,17.42,16.87,17.3,15.41,17.05,14.5,14.6]],[[0,0,1,1,1,1,0],[1,1,1,1,1,1,1,1,0,1,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0]],[[1,1,0,0,0,0,1],[1,0,0,1,1,1,0,1,1,1,1],[0,0,0,0,0,0,0,0,0,0,0,0,1,1]],[[4,4,3,3,4,4,5],[4,4,4,4,4,4,3,4,5,5,4],[3,3,3,3,3,3,3,3,3,3,3,3,5,5]],[[4,4,1,1,4,4,6],[1,2,2,1,2,1,1,1,2,2,2],[2,4,3,3,3,4,4,4,2,2,4,2,4,8]]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>cyl<\/th>\n      <th>mpg<\/th>\n      <th>disp<\/th>\n      <th>hp<\/th>\n      <th>drat<\/th>\n      <th>wt<\/th>\n      <th>qsec<\/th>\n      <th>vs<\/th>\n      <th>am<\/th>\n      <th>gear<\/th>\n      <th>carb<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":1},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Bu gözlem çok kritik. Biz ne istiyoruz? Virgülle ayrılan değerlerin ayrı satırlara yazılmasını, en sağda ise her gözlem için ilgili değerin tekrarlamasını istiyoruz. İşte bu işi yapan ise <code>unnest_longer</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>mt_nest_long <span class="ot">&lt;-</span> mt_nest <span class="sc">%&gt;%</span> <span class="fu">unnest_longer</span>(data)</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>mt_nest_long</span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 32 × 2
     cyl data$mpg $disp   $hp $drat   $wt $qsec   $vs   $am $gear $carb
   &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1     6     21    160    110  3.9   2.62  16.5     0     1     4     4
 2     6     21    160    110  3.9   2.88  17.0     0     1     4     4
 3     6     21.4  258    110  3.08  3.22  19.4     1     0     3     1
 4     6     18.1  225    105  2.76  3.46  20.2     1     0     3     1
 5     6     19.2  168.   123  3.92  3.44  18.3     1     0     4     4
 6     6     17.8  168.   123  3.92  3.44  18.9     1     0     4     4
 7     6     19.7  145    175  3.62  2.77  15.5     0     1     5     6
 8     4     22.8  108     93  3.85  2.32  18.6     1     1     4     1
 9     4     24.4  147.    62  3.69  3.19  20       1     0     4     2
10     4     22.8  141.    95  3.92  3.15  22.9     1     0     4     2
# ℹ 22 more rows</code></pre>
</div>
</div>
<p>Yukarıdaki NFT datası da içiçe listlerden oluşuyor. Bunu daha önce şu şekilde tibble formuna dönüştürdüm.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>d2</span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 3
  name       values               n_t
  &lt;chr&gt;      &lt;list&gt;             &lt;int&gt;
1 Type       &lt;named list [6]&gt;       6
2 Hat        &lt;named list [31]&gt;     31
3 Head       &lt;named list [25]&gt;     25
4 Jacket     &lt;named list [30]&gt;     30
5 Trousers   &lt;named list [30]&gt;     30
6 Shoes      &lt;named list [60]&gt;     60
7 USED       &lt;named list [2]&gt;       2
8 Identity   &lt;named list [202]&gt;   202
9 Background &lt;named list [7]&gt;       7</code></pre>
</div>
</div>
<p>Şimdi <code>unnest_longer</code> kullanarak bir seviye içeriyi dışarı çıkarıyorum.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>d22 <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span> <span class="fu">unnest_longer</span>(values)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>d22</span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 393 × 4
   name  values values_id               n_t
   &lt;chr&gt;  &lt;int&gt; &lt;chr&gt;                 &lt;int&gt;
 1 Type    1774 human 3                   6
 2 Type    1983 zombie                    6
 3 Type    1061 human 4                   6
 4 Type    2292 human 1                   6
 5 Type    1792 human 2                   6
 6 Type    1098 ghost                     6
 7 Hat      415 crown                    31
 8 Hat      384 top hat                  31
 9 Hat      176 orchid (potted plant)    31
10 Hat      172 pavilion headwear        31
# ℹ 383 more rows</code></pre>
</div>
</div>
<p>Unnest_longer ve unnest_wider beraber kullanılan bir örneğe bakıyorum son olarak.</p>
<p>We start off gh_repos similarly, by putting it in a tibble:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>repos <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">repo =</span> gh_repos)</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>repos</span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 1
  repo       
  &lt;list&gt;     
1 &lt;list [30]&gt;
2 &lt;list [30]&gt;
3 &lt;list [30]&gt;
4 &lt;list [26]&gt;
5 &lt;list [30]&gt;
6 &lt;list [30]&gt;</code></pre>
</div>
</div>
<p>This time the elements of repos are a list of repositories that belong to that user. These are observations, so should become new rows, so we use unnest_longer() rather than unnest_wider():</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>repos0 <span class="ot">&lt;-</span> repos <span class="sc">%&gt;%</span> <span class="fu">unnest_longer</span>(repo)</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>repos0</span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 176 × 1
   repo             
   &lt;list&gt;           
 1 &lt;named list [68]&gt;
 2 &lt;named list [68]&gt;
 3 &lt;named list [68]&gt;
 4 &lt;named list [68]&gt;
 5 &lt;named list [68]&gt;
 6 &lt;named list [68]&gt;
 7 &lt;named list [68]&gt;
 8 &lt;named list [68]&gt;
 9 &lt;named list [68]&gt;
10 &lt;named list [68]&gt;
# ℹ 166 more rows</code></pre>
</div>
</div>
<p>Aslına bu şekilde 6 kullanıcınında repolarını alt alta koyduk ve devamında unnest_wider veya hoist kullanarak verileri dışarı çıkarabilir. Ama eğer mesela sadece birinci user’ın repoları ile çalışmak isteseydik önce o user’ın olduğu list’i tibble yapmak gerekecekti.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>firstUser <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">repo=</span>repos[[<span class="dv">1</span>]][[<span class="dv">1</span>]])</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>firstUser</span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 30 × 1
   repo             
   &lt;list&gt;           
 1 &lt;named list [68]&gt;
 2 &lt;named list [68]&gt;
 3 &lt;named list [68]&gt;
 4 &lt;named list [68]&gt;
 5 &lt;named list [68]&gt;
 6 &lt;named list [68]&gt;
 7 &lt;named list [68]&gt;
 8 &lt;named list [68]&gt;
 9 &lt;named list [68]&gt;
10 &lt;named list [68]&gt;
# ℹ 20 more rows</code></pre>
</div>
</div>
<p>Eğer devamında unnest_longer denirse bu durumda alt seviye tamamen dışarıya çıkıyor.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>firstUser <span class="sc">%&gt;%</span> <span class="fu">unnest_longer</span>(repo)</span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,040 × 2
   repo              repo_id    
   &lt;named list&gt;      &lt;chr&gt;      
 1 &lt;int [1]&gt;         id         
 2 &lt;chr [1]&gt;         name       
 3 &lt;chr [1]&gt;         full_name  
 4 &lt;named list [17]&gt; owner      
 5 &lt;lgl [1]&gt;         private    
 6 &lt;chr [1]&gt;         html_url   
 7 &lt;chr [1]&gt;         description
 8 &lt;lgl [1]&gt;         fork       
 9 &lt;chr [1]&gt;         url        
10 &lt;chr [1]&gt;         forks_url  
# ℹ 2,030 more rows</code></pre>
</div>
</div>
<p>Ama kısmen değerlere hoist veya unnest_wider ile mümkün. Önce hoist kodunu veriyorum çünkü bu zaten sitede de var.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>firstUser <span class="sc">%&gt;%</span> <span class="fu">hoist</span>(repo, </span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">login =</span> <span class="fu">c</span>(<span class="st">"owner"</span>, <span class="st">"login"</span>), </span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">"name"</span>,</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">homepage =</span> <span class="st">"homepage"</span>,</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">watchers =</span> <span class="st">"watchers_count"</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 30 × 5
   login       name        homepage watchers repo             
   &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;       &lt;int&gt; &lt;list&gt;           
 1 gaborcsardi after       &lt;NA&gt;            5 &lt;named list [65]&gt;
 2 gaborcsardi argufy      &lt;NA&gt;           19 &lt;named list [65]&gt;
 3 gaborcsardi ask         &lt;NA&gt;            5 &lt;named list [65]&gt;
 4 gaborcsardi baseimports &lt;NA&gt;            0 &lt;named list [65]&gt;
 5 gaborcsardi citest      &lt;NA&gt;            0 &lt;named list [65]&gt;
 6 gaborcsardi clisymbols  ""             18 &lt;named list [65]&gt;
 7 gaborcsardi cmaker      &lt;NA&gt;            0 &lt;named list [65]&gt;
 8 gaborcsardi cmark       &lt;NA&gt;            0 &lt;named list [65]&gt;
 9 gaborcsardi conditions  &lt;NA&gt;            0 &lt;named list [65]&gt;
10 gaborcsardi crayon      &lt;NA&gt;           52 &lt;named list [65]&gt;
# ℹ 20 more rows</code></pre>
</div>
</div>
<p>Bu da unnest_wider kodu;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>firstUser <span class="sc">%&gt;%</span> <span class="fu">unnest_wider</span>(repo)</span></code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 30 × 68
        id name  full_name owner        private html_url description fork  url  
     &lt;int&gt; &lt;chr&gt; &lt;chr&gt;     &lt;list&gt;       &lt;lgl&gt;   &lt;chr&gt;    &lt;chr&gt;       &lt;lgl&gt; &lt;chr&gt;
 1  6.12e7 after gaborcsa… &lt;named list&gt; FALSE   https:/… Run Code i… FALSE http…
 2  4.05e7 argu… gaborcsa… &lt;named list&gt; FALSE   https:/… Declarativ… FALSE http…
 3  3.64e7 ask   gaborcsa… &lt;named list&gt; FALSE   https:/… Friendly C… FALSE http…
 4  3.49e7 base… gaborcsa… &lt;named list&gt; FALSE   https:/… Do we get … FALSE http…
 5  6.16e7 cite… gaborcsa… &lt;named list&gt; FALSE   https:/… Test R pac… TRUE  http…
 6  3.39e7 clis… gaborcsa… &lt;named list&gt; FALSE   https:/… Unicode sy… FALSE http…
 7  3.72e7 cmak… gaborcsa… &lt;named list&gt; FALSE   https:/… port of cm… TRUE  http…
 8  6.80e7 cmark gaborcsa… &lt;named list&gt; FALSE   https:/… CommonMark… TRUE  http…
 9  6.32e7 cond… gaborcsa… &lt;named list&gt; FALSE   https:/… &lt;NA&gt;        TRUE  http…
10  2.43e7 cray… gaborcsa… &lt;named list&gt; FALSE   https:/… R package … FALSE http…
# ℹ 20 more rows
# ℹ 59 more variables: forks_url &lt;chr&gt;, keys_url &lt;chr&gt;,
#   collaborators_url &lt;chr&gt;, teams_url &lt;chr&gt;, hooks_url &lt;chr&gt;,
#   issue_events_url &lt;chr&gt;, events_url &lt;chr&gt;, assignees_url &lt;chr&gt;,
#   branches_url &lt;chr&gt;, tags_url &lt;chr&gt;, blobs_url &lt;chr&gt;, git_tags_url &lt;chr&gt;,
#   git_refs_url &lt;chr&gt;, trees_url &lt;chr&gt;, statuses_url &lt;chr&gt;,
#   languages_url &lt;chr&gt;, stargazers_url &lt;chr&gt;, contributors_url &lt;chr&gt;, …</code></pre>
</div>
</div>


</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Yeniden kullanın</h2><div id="quarto-reuse" class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/deed.tr">https://creativecommons.org/licenses/by/4.0/deed.tr</a></div></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Alıntı</h2><div><div class="quarto-appendix-secondary-label">BibTeX</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{serkan albayrak2022,
  author = {Serkan Albayrak, Raif},
  title = {List veri yapısı üzerine üzerine notlar ve map Fonksiyonu},
  date = {2022-12-11},
  langid = {tr}
}
</code><button title="Panoya Kopyala" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">Lütfen bu çalışmayı şu şekilde alıntılayın:</div><div id="ref-serkan albayrak2022" class="csl-entry quarto-appendix-citeas" role="listitem">
Serkan Albayrak, Raif. 2022. <span>“List veri yapısı üzerine üzerine
notlar ve map Fonksiyonu.”</span> December 11, 2022.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Kopyalandı");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Kopyalandı");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>